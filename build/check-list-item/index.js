(()=>{"use strict";const e=window.wp.blocks,t=window.ReactJSXRuntime,o=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20","aria-hidden":"true",role:"img",focusable:"false",children:(0,t.jsx)("path",{d:"M10,12h8V9h-8V12z M3.29,12.71C3.48,12.89,3.73,13,4,13c0.27,0,0.52-0.1,0.71-0.29l2.5-2.5c0.39-0.39,0.39-1.02,0-1.41 c-0.39-0.39-1.02-0.39-1.41,0L4,10.58l-0.29-0.29c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41L3.29,12.71z"})}),n=window.wp.i18n,c=window.wp.blockEditor,s=window.wp.compose,l=window.wp.data,i=window.wp.element,r=window.wp.keycodes;function k(e,t){const o=(0,l.useRegistry)(),{getPreviousBlockClientId:n,getNextBlockClientId:s,getBlockOrder:i,getBlockRootClientId:r,getBlockName:k}=(0,l.useSelect)(c.store),{mergeBlocks:u,moveBlocksToPosition:a}=(0,l.useDispatch)(c.store);function d(e){const t=i(e);return t.length?d(t[t.length-1]):e}function h(e){const t=r(e),o=r(t);if(o&&"bsx-blocks/check-list-item"===k(o))return o}function f(e){const t=s(e);if(t)return t;const o=h(e);return o?f(o):void 0}function g(e){const t=i(e);return t.length?i(t[0])[0]:f(e)}return c=>{function s(e,t){o.batch((()=>{const[o]=i(t);o&&a(i(o),o,r(e)),u(e,t)}))}if(c){const o=g(e);if(!o)return void t(c);h(o)||s(e,o)}else{const o=n(e);h(e)||(o?s(d(o),e):t(c))}}}function u(t){const o=(0,e.switchToBlockType)(t,"bsx-blocks/check-list");if(o)return o;const n=(0,e.switchToBlockType)(t,"core/paragraph");return n?(0,e.switchToBlockType)(n,"bsx-blocks/check-list"):null}const a=JSON.parse('{"UU":"bsx-blocks/check-list-item"}');(0,e.registerBlockType)(a.UU,{icon:o,merge:(e,t)=>({...e,content:e.content+t.content}),edit:function({attributes:o,setAttributes:a,onReplace:d,clientId:h,mergeBlocks:f}){const{className:g,content:p}=o,B=(0,c.useBlockProps)(),b=(0,c.useInnerBlocksProps)(B,{renderAppender:!1}),w=function(t){const{replaceBlocks:o,selectionChange:n}=(0,l.useDispatch)(c.store),{getBlock:k,getBlockRootClientId:u,getBlockIndex:a,getBlockName:d}=(0,l.useSelect)(c.store),h=(0,i.useRef)(t);return h.current=t,(0,s.useRefEffect)((t=>{function c(t){if(t.defaultPrevented||t.keyCode!==r.ENTER)return;const{content:c,clientId:s}=h.current;if(c.length)return;t.preventDefault();const l=k(u(s)),i=a(s),d=(0,e.cloneBlock)({...l,innerBlocks:l.innerBlocks.slice(0,i)}),f=(0,e.createBlock)((0,e.getDefaultBlockName)()),g=[...l.innerBlocks[i].innerBlocks[0]?.innerBlocks||[],...l.innerBlocks.slice(i+1)],p=g.length?[(0,e.cloneBlock)({...l,innerBlocks:g})]:[];o(l.clientId,[d,f,...p],1),n(f.clientId)}return t.addEventListener("keydown",c),()=>{t.removeEventListener("keydown",c)}}),[])}({content:p,clientId:h}),m=k(h,f);return(0,t.jsxs)("li",{...b,children:[(0,t.jsx)(c.RichText,{ref:(0,s.useMergeRefs)([w]),identifier:"content",tagName:"span",onChange:e=>a({content:e}),value:p,"aria-label":(0,n.__)("List text"),placeholder:(0,n.__)("List"),onMerge:m,onReplace:d?(t,...o)=>{d(function(t){const o=[];for(let n of t)if(console.log("convertToChecklistItems(), iterate blocks, block: "+JSON.stringify(n,null,2)),void 0!==n&&void 0!==n.name)if("bsx-blocks/check-list-item"===n.name)console.log("block.name === 'bsx-blocks/check-list-item'"),o.push(n);else if("bsx-blocks/check-list"===n.name)console.log("bsx-blocks/check-list"===n.name),o.push(...n.innerBlocks);else if("core/paragraph"===n.name){console.log("block.name === 'core/paragraph'");const t=n.attributes.content.split("<br>");for(let n of t){console.log("-- add: "+n);const t=(0,e.createBlock)("bsx-blocks/check-list-item",{content:n});console.log("-- item: "+JSON.stringify(t,null,2)),o.push(t),console.log("-- listItems: "+JSON.stringify(o,null,2))}}else if(n=u(n)){console.log("block = convertBlockToChecklist( block )");for(const{innerBlocks:e}of n)o.push(...e)}else console.log("else");return o}(t),...o)}:void 0}),b.children]})},save:function({attributes:e}){const{content:o}=e;return(0,t.jsx)("li",{...c.useBlockProps.save(),children:(0,t.jsx)(c.RichText.Content,{value:o})})}})})();